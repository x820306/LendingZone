<%- include('layout_header',{nav_cur:'message',actionDefault:'最新',keywordDefault:'',categoryDefault:'不分類'}); -%>
<div class="container">
	<div class="row">
		<center>
			<form method = "post" action= "/Users/resetPW" onsubmit="return disableButton();">
				<h3>重設密碼<br></h3>
				<div class="input-group">
					<label for="nPwdIpt">密碼</label>
					<input type="password" class="form-control" id="PwdIpt" name="Password" placeholder="密碼" required="required">
				</div>
				<br>
				<div class="input-group">
					<label for="n2PwdIpt">密碼確認</label>
					<input type="password" class="form-control" id="2PwdIpt" name="2PwdIpt" placeholder="密碼確認" onkeyup="checkPwd(); return false;"> <br><span id="confirmMessage"></span>
				</div>
				<br>
				<input type="hidden" name="Token" value="<%=tk%>">
				<div class="btn-toolbar" role="toolbar" style = "margin-top: 10px;">
				<button id="subBtnID" style="display:none;" type="submit" class="btn btn-default btn-lg">
					  <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> 確認
				</button>
				<button type="button" class="btn btn-default btn-lg" onClick = "javascript:location.href='/'" >
					  <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> 關閉
				</button></div>
			</form>
		</center>
	</div>
</div>
<script>
	var submitFlag=false;
	function disableButton(){
		if(!submitFlag){
			var orig=$('#subBtnID').attr('class');
			if(orig.search(' disabled')<0){
				orig=orig+' disabled';
				$('#subBtnID').attr('class',orig);
			}
			submitFlag=true;
			return true;
		}else{
			return false;
		}
	}
	
	function checkPwd()
	{
	    var pwd1 = $('#PwdIpt').val();
	    var pwd2 = $('#2PwdIpt').val();
	    if(pwd1 == pwd2){
	        $('#confirmMessage').html('輸入密碼相同');
			var orig=$('#subBtnID').attr('style');
			orig=orig.replace(/display:none;/g, '');
			$('#subBtnID').attr('style',orig);
	    }else{
	        $('#confirmMessage').html('請再次確認您輸入的密碼是否相同');
			var orig=$('#subBtnID').attr('style');
			if(orig.search('display:none;')<0){
				orig=orig+'display:none;';
				$('#subBtnID').attr('style',orig);
			}
	    }
	}
</script>
<%- include('layout_footer',{imgSettingCode:"var ifLoadedCount=0;",imgDrawingCode:""}); -%>